# Foodgram
## Описание проекта

Foodgram — это веб-приложение и API для публикации рецептов и составления списка необходимых ингредиентов, созданные с использованием Django 5. Авторизованные пользователи могут публиковать рецепты, добавлять понравившиеся рецепты в избранное, подписываться на публикации других авторов и формировать список покупок для выбранных рецептов. Любые посетители сайта могут изучить каталог рецептов.

Любые посетители сайта могут изучить каталог рецептов.

**Автор: Краскова Е.А.**

## Структура проекта

### Основные компоненты
* backend - API и веб-интерфейс для администратора
  * run_dev_server.sh - Скрипт запуска сервера 
  * container-entry-point.sh - Скрипт запуска сервера в контейнере (Запускается автоматически, при необходимости)
  * load_ingredients.py - Скрипт для загрузки списка ингредиентов в БД (Запускается автоматически)
  * create_test_data.py - Скрипт для загрузки демонстрационных данных в БД (Запускается автоматически или вручную в зависимости от конфигурации)
* frontend - Интерфейс пользователя
* gateway / nginx - Веб-сервер
* db(Только контейнер, опционально) - База данных: PostgreSQL

### Дополнительные компоненты
* infra - Конфигурация для запуска фронт-энда без других сервисов
* docs - документация
* postman-collection - Тесты для API

### Файлы
* docker-compose.yaml - Конфигурация docker-compose 
* docker-example.env - Пример файла с переменными окружения для запуска приложения
* README.md - Описание проекта
* setup.cfg - Конфигурация линтера

## Технологии
### backend
* Python 3
* Django 5.2
* Django REST Framework
* PostgreSQL

### frontend
* JS
* React

### другое
* Docker
* NGINX

## Запуск

⚠️ После запуска приложению может понадобиться **3-7 минут** на развёртывание(При первом запуске). 

Переменная окружения ``DEMO_DATA=1`` отвечает за загрузку демонстрационных данных.
Данные авторизации для тестовых пользователей:

``user<int>@example.com: password123``

Пользователь user1@example.com - администратор

### Контейнеризированная версия: Со сборкой
```bash
git clone https://github.com/Ivina3/foodgram-st.git
cd foodgram-st
```

Docker-compose:
```bash
cp ./docker-example.env ./docker.env # Создание .env файла из шаблона
# Редактирование файла docker.env
docker-compose build 
docker-compose up
```

### Запуск только backend сервера
Создание виртуального окружения
```bash
python3 -m venv venv
source venv/bin/activate
```

Переменные окружения автоматически загружаются из ``backend/.env`` файла. 
Если он находится в другом каталоге/с другим именем, его потребуется загрузить вручную

Активация .env файла, где ".env" название/путь к файлу.
```bash
set -a
source .env
```

**⚠️ Внимание.** ``DEBUG=1`` помимо отладочного режима указывает бэкенду, что он должен сам обрабатывать запросы к статике, без nginx.

#### Продакшн
```bash
cd backend
set -a
source .env
python3 -m gunicorn --bind 0.0.0.0:8000 backend.wsgi
```

2ой Вариант:
```bash
cd backend
DEBUG=0 ./run_dev_server.sh
```

#### Сервер разработки

```bash
cd backend
DEBUG=1 ./run_dev_server.sh
```

## Тесты
⚠️ Тесты не совместимы с подготовленными данными(Кроме ингредиентов).  
### Линтер
```bash
ruff check backend/
```

```bash
flake8 | grep W
flake8 | grep E
```
### Postman
Смотрите документацию в каталоге postman_collection
